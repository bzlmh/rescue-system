(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0ec6588b"],{b31a:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return i})),a.d(t,"e",(function(){return s})),a.d(t,"d",(function(){return o}));var r=[{title:"紧急联系人姓名",dataIndex:"name",width:140},{title:"紧急联系人电话",dataIndex:"mobile",width:140},{title:"事故车数量",dataIndex:"numVehicles",width:110},{title:"里程桩号",dataIndex:"mileagePile",width:120},{title:"路线方向",dataIndex:"lineDirection",width:140,scopedSlots:{customRender:"lineDirection"}},{title:"经纬度坐标",dataIndex:"coordinates",width:220},{title:"车牌号",dataIndex:"plateNumber",width:130},{title:"注意事项",dataIndex:"atten",width:151},{title:"事故时间",dataIndex:"time",width:315},{title:"现场照片",dataIndex:"rescueId",width:100,fixed:"right",scopedSlots:{customRender:"scenepictures"}},{title:"状态",dataIndex:"status",width:100,fixed:"right",scopedSlots:{customRender:"status"}},{title:"操作",dataIndex:"operation",width:130,fixed:"right",scopedSlots:{customRender:"operation"}}],n=[{title:"桩号",dataIndex:"mileId",width:50},{title:"经纬度",dataIndex:"coordinates",width:90},{title:"路线方向",dataIndex:"lineDirection",width:100,scopedSlots:{customRender:"lineDirection"}},{title:"二维码图片",dataIndex:"qrcode",width:120,scopedSlots:{customRender:"qrcode"}},{title:"操作",dataIndex:"operation",width:200,scopedSlots:{customRender:"operation"}}],i=[{title:"救援id",dataIndex:"rescueId",width:150},{title:"事故图片",dataIndex:"url",width:120,scopedSlots:{customRender:"url"}},{title:"操作",dataIndex:"operation",width:200,scopedSlots:{customRender:"operation"}}],s=[{title:"账号",dataIndex:"userName",width:150},{title:"密码",dataIndex:"password",width:120,scopedSlots:{customRender:"password"}},{title:"注册时间",dataIndex:"createDate",width:200},{title:"最后登录时间",dataIndex:"lastLoginDate",width:200},{title:"身份",dataIndex:"identity",width:120,scopedSlots:{customRender:"identity"}},{title:"操作",dataIndex:"operation",width:200,scopedSlots:{customRender:"operation"}}],o=[{title:"操作账号",dataIndex:"username",width:150},{title:"操作",dataIndex:"operation",width:120},{title:"操作接口",dataIndex:"method",width:200},{title:"ip地址",dataIndex:"ip",width:200},{title:"操作时间",dataIndex:"createDate",width:120}]},b9e3:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"margin-top":"-30px","margin-left":"-25px"}},[a("BreadList",{attrs:{list:["主页","系统管理","用户管理"]}}),a("a-card",[a("div",[a("div",{staticClass:"search-group"},[a("a-button",{staticStyle:{float:"left","margin-top":"0px!important"},attrs:{type:"primary"},on:{click:function(t){return e.handleUserAdd()}}},[e._v(" 新增 ")]),a("div",{staticClass:"search-item",staticStyle:{float:"left","margin-top":"0px!important"}},[a("span",{staticClass:"search-text"},[e._v("用户名:")]),a("a-input",{attrs:{type:"text",placeholder:"可根据用户名称查询"},model:{value:e.page.params.userName,callback:function(t){e.$set(e.page.params,"userName",t)},expression:"page.params.userName"}})],1),a("div",{staticClass:"search-item",staticStyle:{float:"left","margin-top":"0px!important"}},[a("span",{staticClass:"search-text"},[e._v("身份:")]),a("a-input",{attrs:{type:"text",placeholder:"可根据身份查询"},model:{value:e.page.params.identy,callback:function(t){e.$set(e.page.params,"identy",t)},expression:"page.params.identy"}})],1),a("div",{staticClass:"search-item",staticStyle:{float:"left","margin-top":"0px!important"}},[a("a-button",{staticStyle:{float:"left","margin-top":"0px!important"},attrs:{type:"primary",icon:"search"},on:{click:e.searchBySelect}},[e._v(" 查询 ")])],1)],1),a("a-divider",{staticStyle:{"margin-top":"5px"}})],1),a("a-table",{attrs:{rowKey:"memberID",pagination:!1,columns:e.columns,"data-source":e.page.list,scroll:{x:300,y:560}},scopedSlots:e._u([{key:"identity",fn:function(t){return[2==t?a("span",[e._v("工作人员")]):e._e(),1==t?a("span",[e._v("注册用户")]):e._e(),0==t?a("span",[e._v("普通用户")]):e._e()]}},{key:"operation",fn:function(t,r){return[a("a-space",[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleUserEdit(r.memberID)}}},[e._v(" 修 改 ")]),a("a-popconfirm",{attrs:{title:"你确定要删除这条数据嘛？","ok-text":"是的","cancel-text":"不，点错了"},on:{confirm:function(t){return e.handleUserDelete(r.memberID)}}},[a("a-button",{attrs:{type:"danger"}},[e._v(" 删 除")])],1)],1)]}}])},[a("template",{slot:"password"},[a("span",[e._v("**********")])])],2),a("br"),a("a-button",{staticStyle:{float:"left","margin-top":"15px"},attrs:{type:"primary"}},[e._v("总条数："+e._s(e.page.totalCount))]),a("a-pagination",{attrs:{"page-size-options":["5","10","20","50"],total:e.page.totalCount,"show-size-changer":"","page-size":e.page.pageSize},on:{showSizeChange:e.onSizeChange,change:e.onPageChange},model:{value:e.page.currentPage,callback:function(t){e.$set(e.page,"currentPage",t)},expression:"page.currentPage"}}),a("a-modal",{staticStyle:{"padding-bottom":"600px"},attrs:{footer:null,visible:e.visible,"confirm-loading":e.confirmLoading},on:{cancel:function(t){return e.cancel()}}},[e._v(" "+e._s(!1===e.editStatus?"添加":"修改")+" "),a("a-form-model",{ref:"ruleForm",staticStyle:{height:"500px!important"},attrs:{model:e.editUserInfo,rules:e.rules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[a("a-form-model-item",{ref:"userNameRef",attrs:{label:"账号",required:""}},[a("a-input",{model:{value:e.editUserInfo.userName,callback:function(t){e.$set(e.editUserInfo,"userName",t)},expression:"editUserInfo.userName"}})],1),a("a-form-model-item",{ref:"passwordRef",attrs:{label:"密码",required:""}},[a("a-input",{attrs:{type:"password"},model:{value:e.editUserInfo.password,callback:function(t){e.$set(e.editUserInfo,"password",t)},expression:"editUserInfo.password"}})],1),a("a-form-model-item",{ref:"enterpriseIdRef",attrs:{label:"企业Id",required:""}},[a("a-input",{model:{value:e.editUserInfo.enterpriseId,callback:function(t){e.$set(e.editUserInfo,"enterpriseId",t)},expression:"editUserInfo.enterpriseId"}})],1),a("a-form-model-item",{ref:"identityRef",attrs:{label:"身份",required:""}},[a("a-input",{model:{value:e.editUserInfo.identity,callback:function(t){e.$set(e.editUserInfo,"identity",t)},expression:"editUserInfo.identity"}})],1),a("a-form-model-item",{staticClass:"form-btn",staticStyle:{"margin-left":"25%"}},[a("a-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v(" Commit ")]),a("a-button",{staticStyle:{"margin-left":"20px"},on:{click:e.cancel}},[e._v(" Cancel ")])],1)],1)],1)],1)],1)},n=[],i=a("1da1"),s=(a("96cf"),a("c24f")),o=a("b31a"),d={name:"Admin",data:function(){return{loading:!0,confirmLoading:!1,page:{currentPage:1,pageSize:5,totalPage:0,totalCount:0,params:{identity:"",userName:""},list:[],sortColumn:"",sortMethod:""},labelCol:{span:0},wrapperCol:{span:24},other:"",editStatus:!1,editUserInfo:{userName:"",password:"",enterpriseId:"",memberID:"",identity:""},rules:{userNameRef:[{required:!0,message:"请输入账号",trigger:"blur"}],passwordRef:[{required:!0,message:"请输入密码",trigger:"blur"}],enterpriseIdRef:[{required:!0,message:"请输入企业Id",trigger:"blur"}],identityRef:[{required:!0,message:"请输入身份",trigger:"blur"}]},visible:!1,columns:o["e"]}},created:function(){this.getUserList()},methods:{initUserInfo:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.log(e),a.next=3,Object(s["f"])(e);case 3:if(r=a.sent,n=r.data,console.log(n),20005===n.code){a.next=8;break}return a.abrupt("return",t.$message.error("数据加载出错"));case 8:t.editUserInfo=n.data;case 9:case"end":return a.stop()}}),a)})))()},submit:function(){var e=this;this.$refs.ruleForm.validate(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(a){var r,n,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(e.editStatus),!a){t.next=24;break}if(e.editStatus){t.next=13;break}return t.next=5,Object(s["b"])(e.editUserInfo);case 5:if(r=t.sent,n=r.data,console.log(n),20004===n.code){t.next=10;break}return t.abrupt("return",e.$message.success("添加出错"));case 10:e.$message.success(n.msg),t.next=18;break;case 13:return t.next=15,Object(s["g"])(e.editUserInfo);case 15:i=t.sent,o=i.data,console.log(o);case 18:e.visible=!1,e.getUserList(),e.editUserInfo={},e.resetForm(),t.next=27;break;case 24:return console.log("error submit!!"),e.$message.success("error submit!!"),t.abrupt("return",!1);case 27:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},resetForm:function(){this.$refs.ruleForm.resetFields()},cancel:function(){this.$refs.ruleForm.resetFields(),this.visible=!1,this.editUserInfo={}},showModal:function(){this.visible=!0},handleOk:function(){var e=this;this.loading=!0,setTimeout((function(){e.visible=!1,e.loading=!1}),3e3)},handleCancel:function(){this.$refs.ruleForm.resetFields(),this.visible=!1},handleUserAdd:function(){this.editStatus=!1,this.showModal()},handleUserDelete:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(s["c"])(e);case 2:r=a.sent,n=r.data,t.loading=!1,t.$message.success(n.msg),t.getUserList();case 7:case"end":return a.stop()}}),a)})))()},searchBySelect:function(){this.getUserList()},getUserList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["d"])(e.page);case 2:a=t.sent,r=a.data,console.log(r),e.page.list=r.data.list,e.page.totalCount=r.data.totalCount,e.loading=!1,e.$message.success(r.msg);case 9:case"end":return t.stop()}}),t)})))()},onPageChange:function(e){this.page.currentPage=e,this.getUserList()},onSizeChange:function(e,t){this.page.pageSize=t,this.getUserList()},onChange:function(e){console.log("a-switch to ".concat(e)),this.$message.success(e)},handleUserEdit:function(e){this.showModal(),this.editStatus=!0,this.initUserInfo(e)}}},c=d,l=(a("d6f2"),a("2877")),u=Object(l["a"])(c,r,n,!1,null,"675c6de8",null);t["default"]=u.exports},c24f:function(e,t,a){"use strict";a.d(t,"e",(function(){return i})),a.d(t,"d",(function(){return s})),a.d(t,"b",(function(){return o})),a.d(t,"g",(function(){return d})),a.d(t,"c",(function(){return c})),a.d(t,"f",(function(){return l})),a.d(t,"a",(function(){return u}));var r=a("f891"),n={Login:"/admin/login",Logout:"/admin/logout",UserDetail:"/user/selectInfo/page",UserOperate:"/user"};function i(e){return Object(r["a"])({url:"/user/login",method:"post",data:e})}function s(e){return Object(r["a"])({url:n.UserDetail,method:"post",data:e})}function o(e){return Object(r["a"])({url:n.UserOperate+"/register",method:"post",data:e})}function d(e){return Object(r["a"])({url:n.UserOperate+"/updatePassword",method:"put",data:e})}function c(e){return Object(r["a"])({url:n.UserOperate+"/deleteById"+"/".concat(e),method:"delete"})}function l(e){return Object(r["a"])({url:n.UserOperate+"/selectById"+"/".concat(e),method:"get"})}function u(e){return Object(r["a"])({url:"/SendMessage/All",method:"post",data:e})}},c5b5:function(e,t,a){},d6f2:function(e,t,a){"use strict";a("c5b5")}}]);
//# sourceMappingURL=chunk-0ec6588b.f883cf7d.js.map